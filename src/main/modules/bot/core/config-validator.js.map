{
  "version": 3,
  "sources": ["config-validator.ts"],
  "sourcesContent": ["/**\n * Configuration Validator - Validates job search config from YAML\n * \n * Mirrors the Python ConfigValidator class.\n */\n\nimport * as fs from 'fs';\nimport * as yaml from 'js-yaml';\nimport type { JobSearchConfig, ExperienceLevel, JobTypes, DateFilter } from '../types';\nimport { createLogger } from '../utils/logger';\n\nconst log = createLogger('ConfigValidator');\n\nexport class ConfigError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'ConfigError';\n  }\n}\n\n/**\n * Load and validate configuration from YAML file\n */\nexport function loadAndValidateConfig(configPath: string): JobSearchConfig {\n  log.info(`Loading config from: ${configPath}`);\n\n  if (!fs.existsSync(configPath)) {\n    throw new ConfigError(`Config file not found: ${configPath}`);\n  }\n\n  const content = fs.readFileSync(configPath, 'utf-8');\n  \n  let data: Record<string, unknown>;\n  try {\n    data = yaml.load(content) as Record<string, unknown>;\n  } catch (e) {\n    throw new ConfigError(`Error parsing config YAML: ${e}`);\n  }\n\n  return validateConfig(data);\n}\n\n/**\n * Validate configuration object\n */\nexport function validateConfig(data: Record<string, unknown>): JobSearchConfig {\n  // Validate 'remote' parameter\n  if (typeof data.remote !== 'boolean') {\n    throw new ConfigError(\"'remote' must be a boolean value\");\n  }\n\n  // Validate 'experienceLevel' parameters\n  const experienceLevel = validateExperienceLevel(data.experienceLevel);\n\n  // Validate 'jobTypes' parameters\n  const jobTypes = validateJobTypes(data.jobTypes);\n\n  // Validate 'date' filter parameters\n  const dateFilter = validateDateFilter(data.date);\n\n  // Validate 'positions' list\n  const positions = validateStringArray(data.positions, 'positions');\n\n  // Validate 'locations' list\n  const locations = validateStringArray(data.locations, 'locations');\n\n  // Validate 'distance' parameter\n  const distance = validateDistance(data.distance);\n\n  // Validate and sanitize blacklists\n  const companyBlacklist = sanitizeStringArray(data.companyBlacklist);\n  const titleBlacklist = sanitizeStringArray(data.titleBlacklist);\n\n  const config: JobSearchConfig = {\n    remote: data.remote,\n    experienceLevel,\n    jobTypes,\n    date: dateFilter,\n    positions,\n    locations,\n    distance,\n    companyBlacklist,\n    titleBlacklist,\n  };\n\n  log.info(`Config validated: ${positions.length} positions, ${locations.length} locations`);\n  return config;\n}\n\nfunction validateExperienceLevel(data: unknown): ExperienceLevel {\n  const levels = data as Record<string, unknown> || {};\n  const validLevels = ['internship', 'entry', 'associate', 'mid-senior level', 'director', 'executive'];\n\n  const result: ExperienceLevel = {\n    internship: false,\n    entry: false,\n    associate: false,\n    'mid-senior level': false,\n    director: false,\n    executive: false,\n  };\n\n  for (const level of validLevels) {\n    if (typeof levels[level] !== 'boolean') {\n      throw new ConfigError(`Experience level '${level}' must be a boolean value`);\n    }\n    result[level as keyof ExperienceLevel] = levels[level] as boolean;\n  }\n\n  return result;\n}\n\nfunction validateJobTypes(data: unknown): JobTypes {\n  const types = data as Record<string, unknown> || {};\n  const validTypes = ['full-time', 'contract', 'part-time', 'temporary', 'internship', 'other', 'volunteer'];\n\n  const result: JobTypes = {\n    'full-time': false,\n    contract: false,\n    'part-time': false,\n    temporary: false,\n    internship: false,\n    other: false,\n    volunteer: false,\n  };\n\n  for (const jobType of validTypes) {\n    if (typeof types[jobType] !== 'boolean') {\n      throw new ConfigError(`Job type '${jobType}' must be a boolean value`);\n    }\n    result[jobType as keyof JobTypes] = types[jobType] as boolean;\n  }\n\n  return result;\n}\n\nfunction validateDateFilter(data: unknown): DateFilter {\n  const dates = data as Record<string, unknown> || {};\n  const validDates = ['all time', 'month', 'week', '24 hours'];\n\n  const result: DateFilter = {\n    'all time': false,\n    month: false,\n    week: false,\n    '24 hours': false,\n  };\n\n  for (const dateFilter of validDates) {\n    if (typeof dates[dateFilter] !== 'boolean') {\n      throw new ConfigError(`Date filter '${dateFilter}' must be a boolean value`);\n    }\n    result[dateFilter as keyof DateFilter] = dates[dateFilter] as boolean;\n  }\n\n  return result;\n}\n\nfunction validateStringArray(data: unknown, name: string): string[] {\n  if (!Array.isArray(data)) {\n    throw new ConfigError(`'${name}' must be an array`);\n  }\n\n  for (const item of data) {\n    if (typeof item !== 'string') {\n      throw new ConfigError(`'${name}' must contain only strings`);\n    }\n  }\n\n  return data as string[];\n}\n\nfunction sanitizeStringArray(data: unknown): string[] {\n  if (!Array.isArray(data)) {\n    return [];\n  }\n\n  return data.filter(item => typeof item === 'string') as string[];\n}\n\nfunction validateDistance(data: unknown): number {\n  const approvedDistances = new Set([0, 5, 10, 25, 50, 100]);\n  \n  if (typeof data !== 'number' || !approvedDistances.has(data)) {\n    throw new ConfigError(`Invalid distance value. Must be one of: ${[...approvedDistances].join(', ')}`);\n  }\n\n  return data;\n}\n\n/**\n * Build the base search URL query string from config\n */\nexport function buildSearchUrl(config: JobSearchConfig): string {\n  const parts: string[] = [];\n\n  // Remote filter\n  if (config.remote) {\n    parts.push('f_CF=f_WRA');\n  }\n\n  // Experience level filter\n  const expLevelMap: Record<string, number> = {\n    internship: 1,\n    entry: 2,\n    associate: 3,\n    'mid-senior level': 4,\n    director: 5,\n    executive: 6,\n  };\n  \n  const selectedLevels = Object.entries(config.experienceLevel)\n    .filter(([_, enabled]) => enabled)\n    .map(([level]) => expLevelMap[level]);\n  \n  if (selectedLevels.length > 0) {\n    parts.push(`f_E=${selectedLevels.join(',')}`);\n  }\n\n  // Distance filter\n  parts.push(`distance=${config.distance}`);\n\n  // Job type filter\n  const jobTypeMap: Record<string, string> = {\n    'full-time': 'F',\n    contract: 'C',\n    'part-time': 'P',\n    temporary: 'T',\n    internship: 'I',\n    other: 'O',\n    volunteer: 'V',\n  };\n\n  const selectedTypes = Object.entries(config.jobTypes)\n    .filter(([_, enabled]) => enabled)\n    .map(([type]) => jobTypeMap[type]);\n\n  if (selectedTypes.length > 0) {\n    parts.push(`f_JT=${selectedTypes.join(',')}`);\n  }\n\n  // Date filter\n  const dateMap: Record<string, string> = {\n    'all time': '',\n    month: '&f_TPR=r2592000',\n    week: '&f_TPR=r604800',\n    '24 hours': '&f_TPR=r86400',\n  };\n\n  const selectedDate = Object.entries(config.date).find(([_, enabled]) => enabled);\n  const dateParam = selectedDate ? dateMap[selectedDate[0]] : '';\n\n  // Easy Apply filter\n  parts.push('f_LF=f_AL');\n\n  return `?${parts.join('&')}${dateParam}`;\n}\n"],
  "mappings": "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",
  "names": []
}
