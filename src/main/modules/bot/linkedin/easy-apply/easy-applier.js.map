{
  "version": 3,
  "sources": ["easy-applier.ts"],
  "sourcesContent": ["/**\n * Easy Applier - LinkedIn Easy Apply automation\n * \n * Orchestrates: Click Easy Apply \u2192 Fill forms \u2192 Navigate pages \u2192 Submit\n */\n\nimport type { Page } from 'playwright';\nimport type { SavedAnswer, Job } from '../../types';\nimport type { StatusReporter } from '../../utils/status-reporter';\nimport { createLogger } from '../../utils/logger';\nimport { saveDebugHtml } from '../../utils/debug-html';\nimport { FormHandler, AnswerRecordCallback } from './form-handler';\nimport { NavigationHandler } from './navigation';\nimport { EASY_APPLY_BUTTON_SELECTORS, ALREADY_APPLIED_SELECTORS, JOB_DESCRIPTION_SELECTORS, MODAL, TIMEOUTS } from './selectors';\nimport { getResumePath, getTailoredResumesPath } from '../../utils/paths';\nimport { generateTailoredResume } from '../../models/resume-generator';\nimport * as fs from 'fs';\n\nconst log = createLogger('EasyApplier');\n\n/** Result of an Easy Apply attempt */\nexport interface EasyApplyResult {\n  success: boolean;\n  jobTitle: string;\n  company: string;\n  error?: string;\n  alreadyApplied?: boolean;\n  pagesCompleted: number;\n  totalFields: number;\n  failedFields: number;\n}\n\n/** Configuration for Easy Applier */\nexport interface EasyApplierConfig {\n  maxPages: number;\n  maxRetries: number;\n  resumePath?: string;\n  coverLetterPath?: string;\n  skipOnError: boolean;\n  dryRun: boolean;\n  useConstantResume?: boolean;\n}\n\nconst DEFAULT_CONFIG: EasyApplierConfig = {\n  maxPages: 15,\n  maxRetries: 3,\n  skipOnError: true,\n  dryRun: false,\n};\n\nexport class EasyApplier {\n  private formHandler: FormHandler;\n  private navHandler: NavigationHandler;\n  private config: EasyApplierConfig;\n\n  constructor(\n    private page: Page,\n    private gptAnswerer: any,\n    savedAnswers: SavedAnswer[] = [],\n    resumePath?: string,\n    recordCallback?: AnswerRecordCallback,\n    private reporter?: StatusReporter\n  ) {\n    this.config = { ...DEFAULT_CONFIG, resumePath };\n    this.formHandler = new FormHandler(page, gptAnswerer, savedAnswers, recordCallback, resumePath);\n    this.navHandler = new NavigationHandler(page);\n  }\n\n  /**\n   * Apply to a job using Easy Apply\n   */\n  async apply(job: Job): Promise<EasyApplyResult> {\n    const result: EasyApplyResult = {\n      success: false,\n      jobTitle: job.title,\n      company: job.company,\n      pagesCompleted: 0,\n      totalFields: 0,\n      failedFields: 0,\n    };\n\n    log.info(`\uD83C\uDFAF Starting Easy Apply: \"${job.title}\" at ${job.company}`);\n\n    try {\n      // Navigate to job page\n      await this.navigateToJob(job);\n\n      // Extract job description for tailoring\n      const jobDescription = await this.getJobDescription();\n      if (jobDescription) job.description = jobDescription;\n\n      // Start resume tailoring in background (if enabled)\n      await this.startResumeTailoring(job, jobDescription);\n\n      // Open the Easy Apply modal\n      const modalResult = await this.openEasyApplyModal();\n      if (modalResult === 'already_applied') {\n        result.alreadyApplied = true;\n        result.error = 'Already applied to this job';\n        log.info('\u23ED\uFE0F Skipping - already applied');\n        return result;\n      }\n      if (modalResult === 'failed') {\n        result.error = 'Could not open Easy Apply modal';\n        await this.cleanupFailure();\n        return result;\n      }\n\n      // Set job context for GPT\n      await this.setJobContext(job);\n\n      // Process all pages until submission\n      const processResult = await this.processAllPages(result);\n      if (!processResult.success) {\n        result.error = processResult.error;\n        await this.cleanupFailure();\n        return result;\n      }\n\n      result.success = !this.config.dryRun || true;\n      if (this.config.dryRun) {\n        log.info('\uD83E\uDDEA Dry run - not actually submitted');\n        await this.navHandler.closeModal();\n      }\n\n      if (result.success) {\n        log.info(`\u2705 Successfully applied to \"${job.title}\" at ${job.company}`);\n      }\n\n    } catch (error) {\n      result.error = String(error);\n      log.error(`Error during Easy Apply: ${error}`);\n      await this.saveHtml('apply_error', result.jobTitle);\n      await this.cleanupFailure();\n    }\n\n    return result;\n  }\n\n  /**\n   * Navigate to job page\n   */\n  private async navigateToJob(job: Job): Promise<void> {\n    log.debug(`Navigating to job page: ${job.link}`);\n    await this.page.goto(job.link, { waitUntil: 'domcontentloaded', timeout: 60000 });\n    await this.page.waitForLoadState('domcontentloaded');\n    await this.page.waitForTimeout(TIMEOUTS.long + Math.random() * 500);\n    await this.saveHtml('job_page_loaded', job.title);\n  }\n\n  /**\n   * Start resume tailoring in background\n   */\n  private async startResumeTailoring(job: Job, jobDescription: string): Promise<void> {\n    if (this.config.useConstantResume) {\n      log.info('\uD83D\uDCC4 Using constant resume (tailoring disabled)');\n      return;\n    }\n\n    if (!jobDescription || !this.gptAnswerer) return;\n\n    log.info('\uD83D\uDE80 Starting resume tailoring in background...');\n    const tailoringPromise = this.generateTailoredResume(job, jobDescription)\n      .catch(error => {\n        log.warn(`Background resume tailoring failed: ${error}`);\n        return null;\n      });\n\n    this.formHandler.setPendingTailoredResume(tailoringPromise);\n  }\n\n  /**\n   * Open the Easy Apply modal\n   */\n  private async openEasyApplyModal(): Promise<'opened' | 'already_applied' | 'failed'> {\n    try {\n      if (await this.isAlreadyApplied()) return 'already_applied';\n\n      await this.saveHtml('before_find_button');\n      const button = await this.findEasyApplyButton();\n      if (!button) {\n        await this.saveHtml('button_not_found');\n        return 'failed';\n      }\n\n      // Click or navigate\n      const href = await button.getAttribute('href');\n      if (href) {\n        await this.page.goto(href, { waitUntil: 'domcontentloaded', timeout: 60000 });\n      } else {\n        await button.click();\n      }\n\n      // Wait for modal\n      if (!await this.waitForModal()) {\n        await this.saveHtml('modal_not_opened');\n        return 'failed';\n      }\n\n      await this.navHandler.waitForModalReady();\n      await this.saveHtml('modal_opened');\n      return 'opened';\n\n    } catch (error) {\n      log.error(`Failed to open Easy Apply modal: ${error}`);\n      await this.saveHtml('modal_open_error');\n      return 'failed';\n    }\n  }\n\n  /**\n   * Find the Easy Apply button\n   */\n  private async findEasyApplyButton() {\n    for (const selector of EASY_APPLY_BUTTON_SELECTORS) {\n      try {\n        const buttons = this.page.locator(selector);\n        await buttons.first().waitFor({ state: 'attached', timeout: 3000 }).catch(() => {});\n\n        for (const button of await buttons.all()) {\n          if (await button.isVisible() && await button.isEnabled()) {\n            log.info(`\u2713 Found Easy Apply button: ${selector}`);\n            return button;\n          }\n        }\n      } catch {\n        continue;\n      }\n    }\n    log.warn('Easy Apply button not found');\n    return null;\n  }\n\n  /**\n   * Wait for modal to appear\n   */\n  private async waitForModal(): Promise<boolean> {\n    log.info('Waiting for Easy Apply modal...');\n    \n    for (let attempt = 1; attempt <= 3; attempt++) {\n      const modalElements = await this.page.locator(MODAL.container).all();\n      if (modalElements.length > 0) {\n        try {\n          await this.page.waitForSelector(MODAL.container, { timeout: 10000, state: 'visible' });\n          log.info('\u2705 Easy Apply modal visible');\n          return true;\n        } catch {\n          if (attempt < 3) await this.page.waitForTimeout(2000);\n        }\n      } else {\n        if (attempt < 3) await this.page.waitForTimeout(3000);\n      }\n    }\n\n    log.error('Easy Apply modal did not appear');\n    return false;\n  }\n\n  /**\n   * Check if already applied\n   */\n  private async isAlreadyApplied(): Promise<boolean> {\n    for (const selector of ALREADY_APPLIED_SELECTORS) {\n      try {\n        const indicator = this.page.locator(selector).first();\n        if (await indicator.count() > 0 && await indicator.isVisible()) {\n          log.info('Job already applied');\n          return true;\n        }\n      } catch {\n        continue;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Set job context for GPT\n   */\n  private async setJobContext(job: Job): Promise<void> {\n    try {\n      const context = `Job Title: ${job.title}\\nCompany: ${job.company}\\nLocation: ${job.location}\\nDescription: ${job.description?.substring(0, 500) || 'N/A'}`;\n      await this.gptAnswerer.setJobContext(context);\n    } catch {\n      // GPT answerer might not support this\n    }\n  }\n\n  /**\n   * Process all pages until submission\n   */\n  private async processAllPages(result: EasyApplyResult): Promise<{ success: boolean; error?: string }> {\n    let retries = 0;\n    this.formHandler.setRetryMode(false);\n\n    for (let step = 1; step <= this.config.maxPages; step++) {\n      log.info(`========== EASY-APPLY Step ${step} ==========`);\n      await this.saveHtml(`step_${step}_start`);\n\n      if (!await this.navHandler.isModalOpen()) {\n        log.info('Modal closed - application complete');\n        return { success: true };\n      }\n\n      // Fill form fields\n      const pageResult = await this.formHandler.fillCurrentPage();\n      result.totalFields += pageResult.fieldsProcessed;\n      result.failedFields += pageResult.fieldsFailed;\n      log.info(`Form page: ${pageResult.fieldsProcessed - pageResult.fieldsFailed}/${pageResult.fieldsProcessed} fields filled`);\n      await this.saveHtml(`step_${step}_after_fill`);\n\n      // Click primary button\n      const navResult = await this.navHandler.clickPrimaryButton();\n      \n      if (!navResult.success) {\n        await this.saveHtml(`step_${step}_nav_error`);\n\n        if (await this.navHandler.hasValidationErrors()) {\n          retries++;\n          if (retries > this.config.maxRetries) {\n            const errors = await this.navHandler.getValidationErrors();\n            return { success: false, error: `Validation errors: ${errors.join(', ')}` };\n          }\n          log.warn(`Validation errors, retry ${retries}/${this.config.maxRetries}`);\n          this.formHandler.setRetryMode(true);\n          continue;\n        }\n\n        return { success: false, error: navResult.error || 'Navigation failed' };\n      }\n\n      this.formHandler.setRetryMode(false);\n\n      if (navResult.submitted) {\n        log.info('\u2714 Application submitted');\n        await this.saveHtml('submitted_success');\n        result.pagesCompleted = step;\n        await this.handlePostSubmit();\n        return { success: true };\n      }\n\n      await this.page.waitForTimeout(TIMEOUTS.long);\n      if (!await this.navHandler.isModalOpen()) {\n        log.info('Modal closed - application complete');\n        result.pagesCompleted = step;\n        return { success: true };\n      }\n\n      result.pagesCompleted = step;\n      retries = 0;\n      await this.navHandler.waitForModalReady();\n    }\n\n    return { success: false, error: `Exceeded max pages (${this.config.maxPages})` };\n  }\n\n  /**\n   * Handle post-submission stabilization\n   */\n  private async handlePostSubmit(): Promise<void> {\n    log.info('Waiting for page to stabilize...');\n    await this.page.waitForTimeout(2000);\n    try {\n      await this.page.waitForSelector(\"span[data-testid='expandable-text-box']\", { timeout: 3000 });\n      log.info('\u2713 Application completed');\n    } catch {\n      log.debug('Job description not found after submission');\n    }\n  }\n\n  /**\n   * Extract job description\n   */\n  private async getJobDescription(): Promise<string> {\n    try {\n      // Try to expand \"show more\"\n      try {\n        const moreBtn = this.page.locator('button.inline-show-more-text__button, button.jobs-description__footer-button').first();\n        if (await moreBtn.isVisible()) {\n          await moreBtn.click();\n          await this.page.waitForTimeout(350);\n        }\n      } catch {}\n\n      for (const selector of JOB_DESCRIPTION_SELECTORS) {\n        try {\n          const element = this.page.locator(selector).first();\n          await element.waitFor({ state: 'attached', timeout: 5000 });\n          const text = await element.textContent();\n          if (text?.trim()) {\n            log.debug(`Found description (${text.length} chars)`);\n            return text.trim();\n          }\n        } catch {\n          continue;\n        }\n      }\n      return '';\n    } catch (error) {\n      log.error(`Error extracting job description: ${error}`);\n      return '';\n    }\n  }\n\n  /**\n   * Generate tailored resume\n   */\n  private async generateTailoredResume(job: Job, jobDescription: string): Promise<string | null> {\n    try {\n      const baseResumePath = getResumePath();\n      if (!fs.existsSync(baseResumePath)) {\n        log.error(`Resume config not found: ${baseResumePath}`);\n        return null;\n      }\n\n      log.info(`\uD83C\uDFAF Tailoring resume for ${job.company} - ${job.title}`);\n      const baseResumeYaml = fs.readFileSync(baseResumePath, 'utf-8');\n\n      const tailoredConfigYaml = await this.gptAnswerer.tailorResumeToJob(jobDescription, baseResumeYaml);\n      if (!tailoredConfigYaml || tailoredConfigYaml.length < 100) {\n        log.error('Invalid tailored config');\n        return null;\n      }\n\n      const result = await generateTailoredResume({\n        companyName: job.company,\n        jobTitle: job.title,\n        tailoredConfigYaml,\n        page: this.page,\n      });\n\n      log.info(`\u2705 Tailored resume: ${result.pdfPath}`);\n      this.cleanupOldResumes();\n      return result.pdfPath;\n\n    } catch (error) {\n      log.error(`Failed to generate tailored resume: ${error}`);\n      return null;\n    }\n  }\n\n  /**\n   * Clean up old tailored resumes (keep last 20)\n   */\n  private cleanupOldResumes(): void {\n    try {\n      const resumesDir = getTailoredResumesPath();\n      const files = fs.readdirSync(resumesDir)\n        .filter(f => f.endsWith('.pdf'))\n        .map(f => ({ name: f, path: `${resumesDir}/${f}`, time: fs.statSync(`${resumesDir}/${f}`).mtime.getTime() }))\n        .sort((a, b) => b.time - a.time);\n\n      for (const file of files.slice(20)) {\n        fs.unlinkSync(file.path);\n        ['.yaml', '_scores.json'].forEach(ext => {\n          const p = file.path.replace('.pdf', ext);\n          if (fs.existsSync(p)) fs.unlinkSync(p);\n        });\n        log.debug(`Cleaned up: ${file.name}`);\n      }\n    } catch {}\n  }\n\n  private async cleanupFailure(): Promise<void> {\n    try {\n      if (await this.navHandler.isModalOpen()) await this.navHandler.closeModal();\n    } catch {}\n  }\n\n  private async saveHtml(context: string, jobTitle = ''): Promise<string | null> {\n    return saveDebugHtml(this.page, context, jobTitle);\n  }\n\n  updateConfig(config: Partial<EasyApplierConfig>): void {\n    this.config = { ...this.config, ...config };\n    if (config.resumePath) this.formHandler.setResumePath(config.resumePath);\n    if (config.coverLetterPath) this.formHandler.setCoverLetterPath(config.coverLetterPath);\n  }\n\n  async hasEasyApply(): Promise<boolean> {\n    try {\n      const btn = this.page.locator('button:has-text(\"Easy Apply\")').first();\n      return await btn.count() > 0 && await btn.isVisible();\n    } catch {\n      return false;\n    }\n  }\n}\n\nexport { EasyApplier as LinkedInEasyApplier };\n"],
  "mappings": "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",
  "names": []
}
