{
  "version": 3,
  "sources": ["navigation.ts"],
  "sourcesContent": ["/**\n * Navigation Handler - Manages Easy Apply modal navigation\n * \n * Handles:\n * - Primary button clicking (Next/Review/Submit)\n * - Modal state detection\n * - Validation error detection\n * - Modal dismissal\n */\n\nimport type { Page, Locator } from 'playwright';\nimport { createLogger } from '../../utils/logger';\n\nconst log = createLogger('Navigation');\n\n/** Possible states of the Easy Apply modal */\nexport type ModalState = \n  | 'form'      // Regular form page with Next button\n  | 'review'    // Review page before submission\n  | 'submit'    // Final submit button visible\n  | 'success'   // Application submitted successfully\n  | 'error'     // Error occurred\n  | 'closed'    // Modal was closed\n  | 'unknown';  // Unable to determine state\n\n/** Result after clicking primary button */\nexport interface PrimaryButtonResult {\n  success: boolean;\n  submitted: boolean;  // True if this was the final Submit click\n  error?: string;\n}\n\nexport class NavigationHandler {\n  private page: Page;\n\n  constructor(page: Page) {\n    this.page = page;\n  }\n\n  /**\n   * Click the primary action button (Next/Review/Submit) - MATCHES PYTHON next_or_submit()\n   * \n   * This method finds and clicks whatever primary button is available:\n   * - Next: Advances to next form page\n   * - Review: Goes to review page\n   * - Submit: Submits the application\n   * \n   * @returns Result indicating success and whether application was submitted\n   */\n  async clickPrimaryButton(): Promise<PrimaryButtonResult> {\n    try {\n      // Find the footer first (like Python does)\n      const footer = this.page.locator('div.jobs-easy-apply-modal footer, footer.jobs-easy-apply-modal__footer').first();\n      \n      if (await footer.count() === 0) {\n        // No footer - check if modal is closed (application complete)\n        const isOpen = await this.isModalOpen();\n        if (!isOpen) {\n          log.info('Modal closed - application already complete');\n          return { success: true, submitted: true };\n        }\n        return { success: false, submitted: false, error: 'No footer found in modal' };\n      }\n\n      // Try various selectors for the primary button (matching Python's selector list)\n      const selectors = [\n        // Explicit hooks\n        'button[data-live-test-easy-apply-next-button]',\n        'button[data-live-test-easy-apply-review-button]',\n        'button[data-live-test-easy-apply-submit-button]',\n        'button[data-easy-apply-next-button]',\n        // Aria labels  \n        'button[aria-label*=\"Continue to next step\"]',\n        'button[aria-label*=\"Review your application\"]',\n        'button[aria-label*=\"Submit application\"]',\n        // Last-resort primary CTA\n        'button.artdeco-button--primary',\n      ];\n\n      let primaryBtn: Locator | null = null;\n      let buttonLabel = '';\n\n      for (const selector of selectors) {\n        try {\n          const btn = footer.locator(selector).first();\n          if (await btn.count() > 0 && await btn.isVisible() && await btn.isEnabled()) {\n            primaryBtn = btn;\n            buttonLabel = (await btn.textContent())?.trim() || await btn.getAttribute('aria-label') || '';\n            break;\n          }\n        } catch {\n          continue;\n        }\n      }\n\n      if (!primaryBtn) {\n        // No button found - check if modal closed\n        const isOpen = await this.isModalOpen();\n        if (!isOpen) {\n          log.info('Modal closed - application complete');\n          return { success: true, submitted: true };\n        }\n        return { success: false, submitted: false, error: 'No primary button found' };\n      }\n\n      log.info(`Found button: \"${buttonLabel}\"`);\n\n      // Check if this is the Submit button\n      const isSubmit = buttonLabel.toLowerCase().includes('submit');\n      \n      if (isSubmit) {\n        // Unfollow company before submitting (like Python does)\n        await this.unfollowCompany();\n        log.info('\uD83D\uDE80 Submitting application...');\n      }\n\n      // Click the button\n      await primaryBtn.scrollIntoViewIfNeeded();\n      await primaryBtn.click();\n      log.info(`Clicked button: \"${buttonLabel}\"`);\n\n      // Wait for page to react\n      await this.page.waitForTimeout(1000);\n\n      // Check for validation errors\n      if (await this.hasValidationErrors()) {\n        log.warn('Validation errors after clicking button');\n        return { success: false, submitted: false, error: 'Validation errors' };\n      }\n\n      // Handle \"Save this application?\" modal if it appears (MATCHES PYTHON)\n      if (await this.handleSaveApplicationModal()) {\n        log.info('Handled \"Save this application?\" modal - continuing');\n      }\n\n      // Wait for button to become detached (page updated)\n      try {\n        await primaryBtn.waitFor({ state: 'detached', timeout: 8000 });\n        log.debug('Button became detached - page updated');\n      } catch {\n        log.debug('Button did not detach within timeout - continuing');\n      }\n\n      // Give new page time to stabilize\n      await this.page.waitForTimeout(500);\n\n      // Check if we just submitted\n      if (isSubmit) {\n        // Check if modal closed (success) or still open (might need more steps)\n        const stillOpen = await this.isModalOpen();\n        if (!stillOpen) {\n          log.info('\u2705 Application submitted successfully!');\n          return { success: true, submitted: true };\n        }\n        // Modal still open - might have post-submit modal or error\n        const state = await this.getModalState();\n        if (state === 'success') {\n          log.info('\u2705 Application submitted successfully!');\n          return { success: true, submitted: true };\n        }\n      }\n\n      return { success: true, submitted: false };\n\n    } catch (error) {\n      log.error(`Error clicking primary button: ${error}`);\n      return { success: false, submitted: false, error: String(error) };\n    }\n  }\n\n  /**\n   * Handle the \"Save this application?\" modal that appears when LinkedIn\n   * thinks we're trying to exit the application.\n   * \n   * MATCHES PYTHON: handle_save_application_modal()\n   * \n   * This modal has two buttons:\n   * - \"Discard\" - discards the application\n   * - \"Save\" - saves the draft and exits\n   * \n   * We click \"Save\" to preserve progress, then wait for modal to reopen.\n   */\n  private async handleSaveApplicationModal(): Promise<boolean> {\n    try {\n      // Look for the \"Save this application?\" modal\n      const saveModal = this.page.locator('div.artdeco-modal').filter({ hasText: 'Save this application' });\n      \n      if (await saveModal.count() > 0 && await saveModal.isVisible()) {\n        log.info('\u26A0\uFE0F \"Save this application?\" modal detected');\n        \n        // Click \"Save\" button to save draft and continue\n        const saveSelectors = [\n          'button[data-control-name*=\"save\"]',\n          'button:has-text(\"Save\")',\n          '.artdeco-modal__footer button.artdeco-button--primary',\n        ];\n        \n        let saveButton = null;\n        for (const selector of saveSelectors) {\n          try {\n            const btn = saveModal.locator(selector).first();\n            if (await btn.count() > 0) {\n              saveButton = btn;\n              break;\n            }\n          } catch { continue; }\n        }\n        \n        if (saveButton) {\n          log.info('Clicking \"Save\" button to preserve application');\n          await saveButton.click();\n          await this.page.waitForTimeout(1500);\n          \n          // Wait for modal to close\n          try {\n            await saveModal.waitFor({ state: 'hidden', timeout: 3000 });\n            log.info('\u2705 Save modal closed');\n          } catch {\n            log.warn('Save modal didn\\'t close - continuing anyway');\n          }\n          \n          // Wait for Easy Apply modal to reopen\n          await this.page.waitForTimeout(1000);\n          log.info('Waiting for Easy Apply modal to reopen...');\n          \n          try {\n            const easyApplyModal = this.page.locator('div.jobs-easy-apply-modal').first();\n            await easyApplyModal.waitFor({ state: 'visible', timeout: 5000 });\n            log.info('\u2705 Easy Apply modal reopened - application continuing');\n          } catch {\n            log.warn('Easy Apply modal didn\\'t reopen - may have completed');\n          }\n          \n          return true;\n        } else {\n          log.warn('Could not find Save button in modal');\n          return false;\n        }\n      }\n      \n      return false;\n      \n    } catch (error) {\n      log.debug(`Error handling save modal: ${error}`);\n      return false;\n    }\n  }\n\n  /**\n   * Unfollow company checkbox (like Python's unfollow_company)\n   * \n   * The checkbox is visually-hidden, so we must click the label instead.\n   * LinkedIn uses specific IDs for this element.\n   */\n  private async unfollowCompany(): Promise<void> {\n    try {\n      // The checkbox is visually-hidden; we need to click the label\n      const label = this.page.locator(\"footer label[for='follow-company-checkbox']\").first();\n      if (await label.count() === 0) {\n        log.debug('Follow company label not found - may not be present for this job');\n        return;\n      }\n      \n      // Scroll so the label is free of the sticky footer\n      await label.evaluate((el) => el.scrollIntoView({ block: 'center' }));\n      await this.page.waitForTimeout(200);\n      \n      // Only click if it is actually checked\n      const checkbox = this.page.locator('#follow-company-checkbox').first();\n      if (await checkbox.count() > 0 && await checkbox.isChecked()) {\n        log.debug('Unchecking follow company checkbox (clicking label)');\n        // Use JS click to avoid interception issues\n        await label.evaluate((el: HTMLElement) => el.click());\n        log.info('\u2705 Unchecked follow company checkbox');\n      } else {\n        log.debug('Follow company checkbox already unchecked or not found');\n      }\n    } catch (error) {\n      log.debug(`Follow company uncheck failed (ok if not present): ${error}`);\n    }\n  }\n\n  /**\n   * Check if Easy Apply modal is still open\n   */\n  async isModalOpen(): Promise<boolean> {\n    try {\n      const modal = this.page.locator('div.jobs-easy-apply-modal').first();\n      return await modal.count() > 0 && await modal.isVisible();\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get the current state of the Easy Apply modal\n   * \n   * This determines what navigation buttons are available\n   * and what action should be taken next.\n   */\n  async getModalState(): Promise<ModalState> {\n    try {\n      // Check if modal is still open\n      const modal = this.page.locator('[data-test-modal]').first();\n      if (await modal.count() === 0) {\n        return 'closed';\n      }\n\n      // Check for success message\n      const successIndicators = [\n        'text=/application.*sent/i',\n        'text=/successfully.*applied/i',\n        '[data-test-modal-close-btn]', // Success modal has close button\n      ];\n      \n      for (const selector of successIndicators) {\n        const element = this.page.locator(selector).first();\n        if (await element.count() > 0) {\n          const text = await modal.textContent() || '';\n          if (text.toLowerCase().includes('application') && \n              (text.toLowerCase().includes('sent') || text.toLowerCase().includes('submitted'))) {\n            return 'success';\n          }\n        }\n      }\n\n      // Check for Submit button (final step)\n      const submitButton = this.page.locator('button[aria-label*=\"Submit application\"]');\n      if (await submitButton.count() > 0 && await submitButton.isVisible()) {\n        return 'submit';\n      }\n\n      // Check for Review button (one step before submit)\n      const reviewButton = this.page.locator('button[aria-label*=\"Review\"]');\n      if (await reviewButton.count() > 0 && await reviewButton.isVisible()) {\n        return 'review';\n      }\n\n      // Check for Next button (regular form pages)\n      const nextButton = this.page.locator('button[aria-label*=\"Continue to next step\"]');\n      if (await nextButton.count() > 0 && await nextButton.isVisible()) {\n        return 'form';\n      }\n\n      // Check for error state\n      const errorMessage = this.page.locator('.artdeco-inline-feedback--error');\n      if (await errorMessage.count() > 0) {\n        return 'error';\n      }\n\n      return 'unknown';\n    } catch (error) {\n      log.error(`Error getting modal state: ${error}`);\n      return 'unknown';\n    }\n  }\n\n  /**\n   * Close the Easy Apply modal\n   * \n   * Used when aborting an application or after success.\n   */\n  async closeModal(): Promise<boolean> {\n    try {\n      // Try X button first\n      const closeButton = this.page.locator('button[aria-label*=\"Dismiss\"]').first();\n      if (await closeButton.count() > 0) {\n        await closeButton.click();\n        await this.page.waitForTimeout(500);\n        \n        // Handle \"Discard\" confirmation if it appears\n        await this.handleDiscardConfirmation();\n        \n        return true;\n      }\n\n      // Try pressing Escape\n      await this.page.keyboard.press('Escape');\n      await this.page.waitForTimeout(500);\n      await this.handleDiscardConfirmation();\n\n      return true;\n    } catch (error) {\n      log.error(`Error closing modal: ${error}`);\n      return false;\n    }\n  }\n\n  /**\n   * Handle the \"Discard\" confirmation dialog\n   * \n   * When closing an in-progress application, LinkedIn asks to confirm.\n   */\n  private async handleDiscardConfirmation(): Promise<void> {\n    try {\n      // Look for discard confirmation\n      const discardButton = this.page.locator('button[data-test-dialog-primary-btn]');\n      if (await discardButton.count() > 0) {\n        const buttonText = await discardButton.textContent();\n        if (buttonText?.toLowerCase().includes('discard')) {\n          await discardButton.click();\n          await this.page.waitForTimeout(500);\n          log.debug('Clicked Discard in confirmation dialog');\n        }\n      }\n    } catch {\n      // Ignore - confirmation might not appear\n    }\n  }\n\n  /**\n   * Check if there are validation errors on the current page\n   */\n  async hasValidationErrors(): Promise<boolean> {\n    try {\n      // LinkedIn shows errors with specific classes\n      const errorSelectors = [\n        '.artdeco-inline-feedback--error',\n        '[data-test-form-element-error-message]',\n        '.fb-form-element__error-text',\n      ];\n\n      for (const selector of errorSelectors) {\n        const errors = await this.page.locator(selector).all();\n        for (const error of errors) {\n          if (await error.isVisible()) {\n            const text = await error.textContent();\n            if (text?.trim()) {\n              log.warn(`Validation error: \"${text}\"`);\n              return true;\n            }\n          }\n        }\n      }\n\n      return false;\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Get all visible validation error messages\n   */\n  async getValidationErrors(): Promise<string[]> {\n    const errors: string[] = [];\n    \n    try {\n      const errorElements = await this.page.locator('.artdeco-inline-feedback--error').all();\n      \n      for (const element of errorElements) {\n        if (await element.isVisible()) {\n          const text = await element.textContent();\n          if (text?.trim()) {\n            errors.push(text.trim());\n          }\n        }\n      }\n    } catch {\n      // Ignore errors in error collection\n    }\n\n    return errors;\n  }\n\n  /**\n   * Wait for the modal to finish loading/transitioning\n   */\n  async waitForModalReady(): Promise<void> {\n    try {\n      // Wait for loading indicators to disappear\n      const loadingSpinner = this.page.locator('.artdeco-spinner');\n      await loadingSpinner.waitFor({ state: 'hidden', timeout: 5000 }).catch(() => {});\n      \n      // Small delay for any animations\n      await this.page.waitForTimeout(500);\n    } catch {\n      // Ignore timeout - modal might already be ready\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
